(()=>{"use strict";var e={7829:(e,t,r)=>{var a=r(1957),s=r(3890),o=r(499),n=r(9835),i=r(3100);const c={__name:"App",setup(e){const t=(0,i.oR)();return t.dispatch("storeGeneral/handleAuthStateChanged"),(e,t)=>{const r=(0,n.up)("router-view");return(0,n.wg)(),(0,n.j4)(r)}}},l=c,u=l;var d=r(3525),f=r(3340),h=r(8339);const p=[{path:"/",component:()=>Promise.all([r.e(736),r.e(229)]).then(r.bind(r,2229)),children:[{path:"",component:()=>Promise.all([r.e(736),r.e(946)]).then(r.bind(r,946))},{path:"/chat/:otherUserId",component:()=>Promise.all([r.e(736),r.e(153)]).then(r.bind(r,8153))},{path:"/auth",component:()=>Promise.all([r.e(736),r.e(83)]).then(r.bind(r,5083))}]},{path:"/:catchAll(.*)*",component:()=>Promise.all([r.e(736),r.e(134)]).then(r.bind(r,4134))}],b=p,m=(0,f.BC)((function(){const e=h.r5,t=(0,h.p7)({scrollBehavior:()=>({left:0,top:0}),routes:b,history:e("")});return t}));async function g(e,t){const a=e(u);a.use(s.Z,t);const n="function"===typeof d.Z?await(0,d.Z)({}):d.Z,{storeKey:i}=await Promise.resolve().then(r.bind(r,3525)),c=(0,o.Xl)("function"===typeof m?await m({store:n}):m);return n.$router=c,{app:a,store:n,storeKey:i,router:c}}const v={config:{}},y="";async function S({app:e,router:t,store:r,storeKey:a},s){let o=!1;const n=e=>{try{return t.resolve(e).href}catch(r){}return Object(e)===e?null:e},i=e=>{if(o=!0,"string"===typeof e&&/^https?:\/\//.test(e))return void(window.location.href=e);const t=n(e);null!==t&&(window.location.href=t,window.location.reload())},c=window.location.href.replace(window.location.origin,"");for(let u=0;!1===o&&u<s.length;u++)try{await s[u]({app:e,router:t,store:r,ssrContext:null,redirect:i,urlPath:c,publicPath:y})}catch(l){return l&&l.url?void i(l.url):void console.error("[Quasar] boot error:",l)}!0!==o&&(e.use(t),e.use(r,a),e.mount("#q-app"))}g(a.ri,v).then((e=>{const[t,a]=void 0!==Promise.allSettled?["allSettled",e=>e.map((e=>{if("rejected"!==e.status)return e.value.default;console.error("[Quasar] boot error:",e.reason)}))]:["all",e=>e.map((e=>e.default))];return Promise[t]([Promise.resolve().then(r.bind(r,4987))]).then((t=>{const r=a(t).filter((e=>"function"===typeof e));S(e,r)}))}))},4987:(e,t,r)=>{r.r(t),r.d(t,{firebaseAuth:()=>n,firebaseDatabase:()=>i});var a=r(222);r(2159),r(8570);const s={apiKey:"AIzaSyCEygo5I1bx_tVTljShhkykESUzheJ-4LE",authDomain:"flash-chat-e151f.firebaseapp.com",projectId:"flash-chat-e151f",storageBucket:"flash-chat-e151f.appspot.com",messagingSenderId:"884092328844",appId:"1:884092328844:web:adccc0a920bd63fbeb54a9"},o=a.Z.initializeApp(s),n=o.auth(),i=o.database()},3525:(e,t,r)=>{r.d(t,{Z:()=>h});var a=r(3340),s=r(3100),o=(r(2879),r(4987));let n;function i(e){const t=document.querySelector(".error-message");t.innerHTML=e}const c={userDetails:{},contacts:[],addContactMessage:"",messages:[]},l={getUserDetails:e=>e.userDetails},u={SET_USER_DETAILS(e,t){e.userDetails=t},SET_CONTACTS(e,t){const r=e.contacts.findIndex((e=>e.userId===t.userId));-1!==r?e.contacts[r].online=t.online:e.contacts.push(t)},RESET_CONTACTS(e,t){e.contacts=t},SET_ADDCONTACTS_MESSAGE(e,t){e.addContactMessage=t},SET_MESSAGES(e,t){e.messages=t}},d={async registerUser({commit:e},t){try{const e=await o.firebaseAuth.createUserWithEmailAndPassword(t.email,t.password),r=e.user.uid,a=o.firebaseDatabase.ref("users/"+r);await a.set({name:t.name,email:t.email,online:!1}),i("You have successfully registered!")}catch(r){i(r.message)}},async loginUser({commit:e},t){try{await o.firebaseAuth.signInWithEmailAndPassword(t.email,t.password)}catch(r){console.log(r.message)}},handleAuthStateChanged({commit:e,dispatch:t}){o.firebaseAuth.onAuthStateChanged((async r=>{if(r){const s=r.uid,n=o.firebaseDatabase.ref("users/"+s);try{const r=await n.once("value"),a=r.val();e("SET_USER_DETAILS",{name:a.name,email:a.email,userId:s}),t("firebaseUpdateUser",{userId:c.userDetails.userId,upadates:{online:!0}}),this.$router.replace("/"),t("getContacts")}catch(a){console.error("Error fetching user details:",a)}}else{t("firebaseUpdateUser",{userId:c.userDetails.userId,upadates:{online:!1}}),this.$router.replace("/auth");const r=c.userDetails.userId;o.firebaseDatabase.ref("chats/"+r).on("value",(e=>{if(e.val()){const t=Object.keys(e.val());t.forEach((e=>{o.firebaseDatabase.ref("users/"+e).off("value")}))}}),(e=>{console.error("Error fetching contacts:",e)})),o.firebaseDatabase.ref("chats/"+r).off("value"),e("RESET_CONTACTS",[]),e("SET_USER_DETAILS",{})}}))},addNewContact({dispatch:e,commit:t},r){o.firebaseDatabase.ref("users").orderByChild("email").equalTo(r).once("value").then((r=>{if(r.exists()){const a=Object.keys(r.val())[0],s=c.userDetails.userId;o.firebaseDatabase.ref("chats/"+s+"/"+a).once("value").then((t=>{t.exists()||(o.firebaseDatabase.ref("chats/"+s).update({[a]:["1"]}),e("getContacts"))})),o.firebaseDatabase.ref("chats/"+a+"/"+s).once("value").then((t=>{t.exists()||(o.firebaseDatabase.ref("chats/"+a).update({[s]:["1"]}),e("getContacts"))})),t("SET_ADDCONTACTS_MESSAGE","User successfully added to your contacts list.")}else t("SET_ADDCONTACTS_MESSAGE","User with this email not found. Please check the accuracy of the entered data or try entering another email address.")})).catch((e=>{console.error("Error searching for user:",e)}))},getContacts({commit:e}){const t=c.userDetails.userId;o.firebaseDatabase.ref("chats/"+t).on("value",(t=>{if(t.val()){const r=Object.keys(t.val());r.forEach((t=>{o.firebaseDatabase.ref("users/"+t).on("value",(r=>{const a=r.val(),s={userId:t,name:a.name,email:a.email,online:a.online};e("SET_CONTACTS",s)}),(e=>{console.error("Error fetching user details:",e)}))}))}}),(e=>{console.error("Error fetching contacts:",e)}))},firebaseUpdateUser({},e){e.userId&&o.firebaseDatabase.ref("users/"+e.userId).update(e.upadates)},logoutUser(){o.firebaseAuth.signOut()},getMessages({commit:e},t){const r=c.userDetails.userId;n=o.firebaseDatabase.ref("chats/"+r+"/"+t),n.on("value",(t=>{e("SET_MESSAGES",t.val())}))},stopGetMessages(){n&&n.off("value")},sendNewMessage({},e){const t=e.otherUserId,r=c.userDetails.userId,a=e.message,s={name:"them",text:a.text,from:"them"};o.firebaseDatabase.ref("chats/"+r+"/"+t).push(a),o.firebaseDatabase.ref("chats/"+t+"/"+r).push(s)}},f={namespaced:!0,state:c,getters:l,mutations:u,actions:d},h=(0,a.h)((function(){const e=(0,s.MT)({modules:{storeGeneral:f},strict:!1});return e}))}},t={};function r(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={id:a,loaded:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=e,(()=>{var e=[];r.O=(t,a,s,o)=>{if(!a){var n=1/0;for(u=0;u<e.length;u++){for(var[a,s,o]=e[u],i=!0,c=0;c<a.length;c++)(!1&o||n>=o)&&Object.keys(r.O).every((e=>r.O[e](a[c])))?a.splice(c--,1):(i=!1,o<n&&(n=o));if(i){e.splice(u--,1);var l=s();void 0!==l&&(t=l)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[a,s,o]}})(),(()=>{r.n=e=>{var t=e&&e.__esModule?()=>e["default"]:()=>e;return r.d(t,{a:t}),t}})(),(()=>{r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})}})(),(()=>{r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,a)=>(r.f[a](e,t),t)),[]))})(),(()=>{r.u=e=>"js/"+e+"."+{83:"46bf3670",134:"8b298bcd",153:"89037cc0",229:"bdbf4272",946:"fb645be4"}[e]+".js"})(),(()=>{r.miniCssF=e=>"css/"+e+"."+{83:"4b30cd9b",153:"d7a9e3f4",229:"0dc57f33",946:"20545954"}[e]+".css"})(),(()=>{r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()})(),(()=>{r.hmd=e=>(e=Object.create(e),e.children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:()=>{throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e)})(),(()=>{r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t)})(),(()=>{var e={},t="package:";r.l=(a,s,o,n)=>{if(e[a])e[a].push(s);else{var i,c;if(void 0!==o)for(var l=document.getElementsByTagName("script"),u=0;u<l.length;u++){var d=l[u];if(d.getAttribute("src")==a||d.getAttribute("data-webpack")==t+o){i=d;break}}i||(c=!0,i=document.createElement("script"),i.charset="utf-8",i.timeout=120,r.nc&&i.setAttribute("nonce",r.nc),i.setAttribute("data-webpack",t+o),i.src=a),e[a]=[s];var f=(t,r)=>{i.onerror=i.onload=null,clearTimeout(h);var s=e[a];if(delete e[a],i.parentNode&&i.parentNode.removeChild(i),s&&s.forEach((e=>e(r))),t)return t(r)},h=setTimeout(f.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=f.bind(null,i.onerror),i.onload=f.bind(null,i.onload),c&&document.head.appendChild(i)}}})(),(()=>{r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}})(),(()=>{r.p=""})(),(()=>{if("undefined"!==typeof document){var e=(e,t,r,a,s)=>{var o=document.createElement("link");o.rel="stylesheet",o.type="text/css";var n=r=>{if(o.onerror=o.onload=null,"load"===r.type)a();else{var n=r&&("load"===r.type?"missing":r.type),i=r&&r.target&&r.target.href||t,c=new Error("Loading CSS chunk "+e+" failed.\n("+i+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=n,c.request=i,o.parentNode.removeChild(o),s(c)}};return o.onerror=o.onload=n,o.href=t,r?r.parentNode.insertBefore(o,r.nextSibling):document.head.appendChild(o),o},t=(e,t)=>{for(var r=document.getElementsByTagName("link"),a=0;a<r.length;a++){var s=r[a],o=s.getAttribute("data-href")||s.getAttribute("href");if("stylesheet"===s.rel&&(o===e||o===t))return s}var n=document.getElementsByTagName("style");for(a=0;a<n.length;a++){s=n[a],o=s.getAttribute("data-href");if(o===e||o===t)return s}},a=a=>new Promise(((s,o)=>{var n=r.miniCssF(a),i=r.p+n;if(t(n,i))return s();e(a,i,null,s,o)})),s={143:0};r.f.miniCss=(e,t)=>{var r={83:1,153:1,229:1,946:1};s[e]?t.push(s[e]):0!==s[e]&&r[e]&&t.push(s[e]=a(e).then((()=>{s[e]=0}),(t=>{throw delete s[e],t})))}}})(),(()=>{var e={143:0};r.f.j=(t,a)=>{var s=r.o(e,t)?e[t]:void 0;if(0!==s)if(s)a.push(s[2]);else{var o=new Promise(((r,a)=>s=e[t]=[r,a]));a.push(s[2]=o);var n=r.p+r.u(t),i=new Error,c=a=>{if(r.o(e,t)&&(s=e[t],0!==s&&(e[t]=void 0),s)){var o=a&&("load"===a.type?"missing":a.type),n=a&&a.target&&a.target.src;i.message="Loading chunk "+t+" failed.\n("+o+": "+n+")",i.name="ChunkLoadError",i.type=o,i.request=n,s[1](i)}};r.l(n,c,"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,a)=>{var s,o,[n,i,c]=a,l=0;if(n.some((t=>0!==e[t]))){for(s in i)r.o(i,s)&&(r.m[s]=i[s]);if(c)var u=c(r)}for(t&&t(a);l<n.length;l++)o=n[l],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},a=globalThis["webpackChunkpackage"]=globalThis["webpackChunkpackage"]||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var a=r.O(void 0,[736],(()=>r(7829)));a=r.O(a)})();